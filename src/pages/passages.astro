---
import PageLayout from "@/layouts/page-layout.astro";
import TableHead from "@/components/table-head.astro";
import TabulatorTable from "@/components/tabulator-table.jsx";
import { passagesTableConfig } from "@/lib/tabulator-table-configs.js";
import passagesjson from "@/content/data/passages.json";

import PassagesTimeline from "@/components/passages-timeline.astro";

// Transform data and prepare columns for Tabulator Table
const passages = Object.values(passagesjson);
const tableData = passagesTableConfig.transformData(passages);
const columns = passagesTableConfig.getColumns();
const rowClickConfig = passagesTableConfig.getRowClickConfig;
---

<PageLayout title="Passages">
  <TableHead title="Passages">
   <!--  <details class="mb-5">
      <summary
        class="rounded-md py-2 px-4 bg-brand-400 text-brand-100 hover:bg-brand-700 hover:text-brand-50 transition cursor-pointer mb-4"
        >Passages Timeline Graph
      </summary>
      <PassagesTimeline />
    </details>      -->
    <TabulatorTable
      client:only="react"
      data={tableData}
      columns={columns}
      tableId="passages-table"
      options={{
        paginationSize: 25,
        responsiveLayout: "collapse",
      }}
      downloadTitle="jad_passages"
      rowClickConfig={rowClickConfig}
    />
  </TableHead>
</PageLayout>
