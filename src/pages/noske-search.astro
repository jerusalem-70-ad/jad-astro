---
import Layout from "@/layouts/page-layout.astro";
import NavLink from "@/components/nav-link.astro";
---

<Layout title="Linguistic Search">
  <div class="md:w-5/6 mx-auto md:p-6 p-2">
    <div class="inline-flex items-center justify-start mb-4 border border-gray-200 rounded-2xl shadow bg-brand-100 p-1">
        <NavLink href="/advanced-search" class="text-xl md:text-3xl font-semibold p-3 text-brand-700 hover:text-brand-500">
            Faceted Search
            </NavLink>
            <h2 class="bg-brand-50 text-xl md:text-3xl font-semibold text-brand-600 rounded-2xl p-3">
        Linguistic Search (TEST)
      </h2>
    </div>

  <div class="border border-gray-300 rounded-xl p-4 shadow-sm ">    
    
    <!-- Important Note -->
     <div class="mb-4 p-4 bg-yellow-50 border border-yellow-300 rounded-lg">
       <h3 class="font-semibold mb-2 text-yellow-800">⚠️ Note</h3>
       <p class="text-sm text-gray-700">
         The corpus is updated on a regular basis but not daily! For most up-to-date query use the <NavLink href="/advanced-search">faceted search</NavLink>.</p>
     </div>
     <!-- Search Guide -->
    <details class="mb-4 p-4 bg-brand-100 border border-brand-200 rounded-lg group">
      <summary class="font-semibold text-lg cursor-pointer text-brand-700 hover:text-brand-800">
     How to use the linguistic search
      </summary>
      
      <div class=" grid grid-cols-[repeat(auto-fit,minmax(14rem,1fr))] gap-4 text-sm">
     <!-- Search Modes -->
     <div>
       <ul class="pt-3 space-y-2 ml-4">
         <li>
           <span class="font-semibold text-brand-700 mb-2">Simple mode:</span> Search for a <strong>single</strong> word e.g. <code class="bg-white px-2 py-1 rounded text-xs">Jerusalem</code>
           or
           <code class="bg-white px-2 py-1 rounded text-xs">.*rusalem</code>
         </li>
         <li>
           <span class="font-semibold text-brand-700 mb-2">Lemma:</span> <code class="bg-white px-2 py-1 rounded text-xs">pes</code>
           <span class="text-gray-600 text-xs">shows all forms of the word like 'pes', 'pedibus' etc.</span>
         </li>
         <li>
             <span class="font-semibold text-brand-700 mb-2">Corpus Query Language (CQL): </span>
             <ul class="space-y-2 ml-4">
                 <li>
                 <span class="font-medium">Search by word form:</strong> <code class="bg-white px-2 py-1 rounded text-xs">q[word="Jerusalem"]</code>
                 <br><span class="text-gray-600 text-xs">Finds exact word "Jerusalem"</span>
                 </li>
                 <li>
                 <span class="font-medium">Search by lemma (root form):</strong> <code class="bg-white px-2 py-1 rounded text-xs">q[lemma="cedo"]</code>
                 <br><span class="text-gray-600 text-xs">Finds "cessit", "cedentes", "cediderunt" etc.</span>
                 </li>
                 <li>
                 <span class="font-medium">Combine with wildcards:</strong> <code class="bg-white px-2 py-1 rounded text-xs">q[word="indulg.*"]</code>
                 <br><span class="text-gray-600 text-xs">Finds words starting with "indulg"</span>
                 </li>
                 <li>
                 <span class="font-medium">Multiple options (OR):</strong> <code class="bg-white px-2 py-1 rounded text-xs">q[word="populus|civitatem"]</code>
                 <br><span class="text-gray-600 text-xs">Finds "populus" OR "civitatem"</span>
                 </li>
             </ul>
         </li>
          <li>
           <span class="font-semibold text-brand-700 mb-2">Phrase:</span> <code class="bg-white px-2 py-1 rounded text-xs">reliqua pedibus suis</code>
           <span class="text-gray-600 text-xs">.</span>
         </li>
       </ul>
     </div>
     <!-- Wildcards -->
     <div>
       <h3 class="font-semibold text-brand-700 mb-2">Using Wildcards</h3>
       <ul class="space-y-2 ml-4">
         <li>
           <code class="bg-white px-2 py-1 rounded text-xs">.</code> (dot) = matches any <strong>single</strong> character
           <br><span class="text-gray-600 text-xs">Example: <code>.erusalem</code> matches "Jerusalem" or "Ierusalem"</span>
         </li>
         <li>
           <code class="bg-white px-2 py-1 rounded text-xs">.*</code> (dot-asterisk) = matches <strong>any number</strong> of characters (including zero)
           <br><span class="text-gray-600 text-xs">Example: <code>.*erusalem</code> matches "Jerusalem", "Hierusalem", "Ierusalem"</span>
         </li>
         <li>
           <code class="bg-white px-2 py-1 rounded text-xs">.?</code> (dot-question) = matches <strong>zero or one</strong> character
           <br><span class="text-gray-600 text-xs">Example: <code>.?salem</code> matches "Hierusalem" or "Jerusalem"</span>
         </li>
       </ul>
     </div>
     <!-- Word Distance -->
     <div>
       <h3 class="font-semibold text-brand-700 mb-2">Searching with Word Distance (CQL only)</h3>
       <p class="mb-2">Find words within a certain distance from each other:</p>
       <ul class="space-y-2 ml-4">
          <li>
             <code class="bg-white px-2 py-1 rounded text-xs">q[word="rege"][word="Francorum"]</code>
             <br><span class="text-gray-600 text-xs">Finds "rege" immediately followed by "Francorum"</span>
         </li>
         <li>
             <code class="bg-white px-2 py-1 rounded text-xs">q[word="rege"][][word="Francorum"]</code>
             <br><span class="text-gray-600 text-xs">Finds "rege" exactly 1 word away from "Francorum"</span>
         </li>
         <li>
           <code class="bg-white px-2 py-1 rounded text-xs">q[word="Hieronymus"][]&#123;0,15&#125;[word="Josephus"]</code>
           <br><span class="text-gray-600 text-xs">"Hieronymus" within 0 to 15 words of "Josephus"</span>
         </li>
       </ul>
     </div>
     <!-- Quick Examples -->
     <div>
       <h3 class="font-semibold text-brand-700 mb-2">Quick Examples</h3>
       <div class="bg-white p-3 rounded border border-gray-200">
         <ul class="space-y-1 text-xs font-mono">
           <li>Simple: <code>Jerusalem</code></li>
           <li>Simple with wildcard: <code>.*erusalem</code></li>
           <li>Lemma: <code>altissimus</code></li>
           <li>CQL exact match: <code>q[word="Jerusalem"]</code></li>
           <li>CQL wildcard: <code>q[word=".*salem"]</code></li>
           <li>CQL with distance: <code>q[lemma="sacerdos"][]&#123;0,15&#125; [word="sanguis"]</code></li>
           <li>CQL multiple words: <code>q[word="templum|ecclesia|synagoga"]</code></li>
         </ul>
       </div>
     </div>
      </div>
    </details>
    <div class="grid grid-cols-[auto_1fr_auto] gap-2">
      <select id="search-type-select" class="border border-gray-300 rounded-lg p-2">
     <option value="simple">Simple</option>
     <option value="lemma">Lemma</option>
     <option value="cql">CQL</option>
     <option value="phrase">Phrase</option>
      </select>
      <input type="text" id="search-input" class="w-full p-2 border border-gray-300 rounded-lg"/>
      <button id="search-button" class="button-custom rounded-lg">Search</button>
    </div>
    
    <div id="stats" class="py-2 text-center"></div>
    <div id="results"></div>
    <div id="pagination"></div>
  </div>
</div>
    
</Layout>

<script src="@/lib/noske-search.js"></script>
