---
import PageLayout from "@/layouts/page-layout.astro";
import TableHead from "@/components/table-head.astro";
import TabulatorTable from "@/components/tabulator-table.jsx";
import { manuscriptsTableConfig } from "@/lib/tabulator-table-configs.js";
import manuscriptsjson from "@/content/data/manuscripts.json";

// Transform data and prepare columns for Tabulator Table
const manuscripts = Object.values(manuscriptsjson);
const tableData = manuscriptsTableConfig.transformData(manuscripts);
const columns = manuscriptsTableConfig.getColumns();
const rowClickConfig = manuscriptsTableConfig.getRowClickConfig;
---

<PageLayout title="Manuscripts">
  <TableHead title="Manuscripts">
    <TabulatorTable
      client:only="react"
      data={tableData}
      columns={columns}
      tableId="manuscripts-table"
      options={{
        paginationSize: 25,
        initialSort:[{ column: "settlement", dir: "asc" }],
      }}
      downloadTitle="jad_manuscripts"
      rowClickConfig={rowClickConfig}
    />
  </TableHead>
</PageLayout>
